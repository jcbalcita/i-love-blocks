{"version":3,"sources":["webpack:///webpack/bootstrap 38e846a529444e75f811","webpack:///./lib/iloveblocks.js","webpack:///./lib/game.js","webpack:///./lib/game_view.js","webpack:///./lib/block.js","webpack:///./lib/bullet.js","webpack:///./lib/cannon.js"],"names":["document","addEventListener","canvas","getElementById","ctx","getContext","fillStyle","fillRect","width","height","game","start","Game","blocks","bullets","cannon","score","addBlocks","clearRect","forEach","block","draw","bullet","delta","move","pos","i","length","j","isCollidedWith","size","remove","Math","random","addBossBlock","positions","push","count","object","splice","indexOf","GameView","key","fireBullet","bindKeyHandlers","lastTime","requestAnimationFrame","animate","bind","time","timeDelta","step","NORMAL_FRAME_TIME_DELTA","Block","options","color","randomColor","hexDigits","floor","Bullet","vel","velocityScale","offsetX","offsetY","Cannon","img","drawImage","addBullet","direction"],"mappings":"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","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 38e846a529444e75f811","import Game from './game';\nimport GameView from './game_view';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  var canvas = document.getElementById(\"canvas\");\n  var ctx = canvas.getContext(\"2d\");\n  ctx.fillStyle = \"black\";\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n\n  const game = new Game();\n  new GameView(game, ctx).start();\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/iloveblocks.js","import Block from './block';\nimport Bullet from './bullet';\nimport Cannon from './cannon';\n\nclass Game {\n  constructor() {\n    this.blocks = [];\n    this.bullets = [];\n    this.cannon = new Cannon({game: this});\n    this.score = 0;\n\n    this.addBlocks();\n  }\n\n  draw(ctx) {\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.fillStyle = 'black';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n    this.blocks.forEach(block => {\n      block.draw(ctx);\n    });\n\n    this.cannon.draw(ctx);\n\n    this.bullets.forEach(bullet => {\n      bullet.draw(ctx);\n    });\n  }\n\n  step(delta) {\n    // move objects\n    this.bullets.forEach(bullet => {\n      bullet.move(delta);\n    });\n\n    this.blocks.forEach(block => {\n      block.pos[1] += 0.2;\n    });\n\n    //check collisions\n    for (var i = 0; i < this.blocks.length; i++) {\n      for (var j = 0; j < this.bullets.length; j++) {\n        let block = this.blocks[i];\n        let bullet = this.bullets[j];\n\n        if (block) {\n          block.isCollidedWith(bullet)\n        }\n\n        if (bullet.pos[1] - bullet.size[1] < 0) {\n          this.remove(bullet);\n        }\n\n      }\n    }\n\n    if (this.blocks.length === 0) {\n      if (Math.random() > 0.2) {\n        this.addBossBlock();\n      } else {\n        this.addBlocks();\n      }\n    }\n  }\n\n  addBlocks() {\n    const positions = [[50, 50], [200, 50], [350, 50], [500, 50]];\n\n    for (let i = 0; i < 4; i++) {\n      this.blocks.push(new Block({pos: positions[i], size: 50, game: this}));\n    }\n  }\n\n  addBossBlock() {\n    this.blocks.push(new Block({count: 200, pos: [50, -400], size: 400, game: this}));\n  }\n\n  addBullet(bullet) {\n    this.bullets.push(bullet);\n  }\n\n  remove(object) {\n    if (object instanceof Bullet) {\n      this.bullets.splice(this.bullets.indexOf(object), 1);\n    } else if (object instanceof Block) {\n      this.blocks.splice(this.blocks.indexOf(object), 1);\n    } else {\n      throw \"wtf?\";\n    }\n  }\n\n}\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","class GameView {\n  constructor(game, ctx) {\n    this.ctx = ctx;\n    this.game = game;\n    this.cannon = game.cannon\n  }\n\n  bindKeyHandlers() {\n    key(\"space\", () => { this.cannon.fireBullet() });\n    key(\"a\", () => { this.cannon.move(-20) });\n    key(\"d\", () => { this.cannon.move(20) });\n  }\n\n  start() {\n    this.bindKeyHandlers();\n    this.lastTime = 0;\n    //start the animation\n    requestAnimationFrame(this.animate.bind(this));\n  }\n\n  animate(time) {\n    const timeDelta = time - this.lastTime;\n\n    this.game.step(timeDelta);\n    this.game.draw(this.ctx);\n    this.lastTime = time;\n\n    //every call to animate requests causes another call to animate\n    requestAnimationFrame(this.animate.bind(this));\n  }\n\n}\n\nexport default GameView;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game_view.js","const NORMAL_FRAME_TIME_DELTA = 1000/60;\n\nclass Block {\n  constructor(options) {\n    this.pos = options.pos;\n    this.size = options.size;\n    this.color = this.randomColor();\n    this.count = options.count || 20;\n    this.game = options.game\n  }\n\n  randomColor() {\n    const hexDigits = \"0123456789ABCDEF\";\n    let color = \"#\";\n    for (let i = 0; i < 3; i++) {\n      color += hexDigits[Math.floor((Math.random() * 16))];\n    }\n\n    return color;\n  }\n\n  draw(ctx) {\n    ctx.fillStyle = this.color;\n    ctx.fillRect(this.pos[0], this.pos[1], this.size, this.size);\n  }\n\n  isCollidedWith(bullet) {\n    if (this.pos[0] < bullet.pos[0] + bullet.size &&\n     this.pos[0] + this.size > bullet.pos[0] &&\n     this.pos[1] + this.size > bullet.pos[1]) {\n       this.count -= 1\n\n      if (this.count > 0) {\n        this.color = this.randomColor();\n      } else {\n        this.game.remove(this);\n      }\n\n       this.game.remove(bullet);\n     }\n  }\n\n\n}\n\nexport default Block;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/block.js","const NORMAL_FRAME_TIME_DELTA = 1000/60;\n\nclass Bullet {\n  constructor(options) {\n    this.pos = options.pos;\n    this.vel = [0, -2];\n    this.size = 5;\n    this.game = options.game;\n    this.color = 'white';\n  }\n\n  draw(ctx) {\n    ctx.fillStyle = this.color;\n    ctx.fillRect(this.pos[0], this.pos[1], this.size, this.size);\n  }\n\n  move(timeDelta) {\n  //timeDelta is number of milliseconds since last move\n  //if the computer is busy the time delta will be larger\n  //in this case the MovingObject should move farther in this frame\n  //velocity of object is how far it should move in 1/60th of a second\n  const velocityScale = timeDelta / NORMAL_FRAME_TIME_DELTA,\n      offsetX = this.vel[0] * velocityScale,\n      offsetY = this.vel[1] * velocityScale;\n\n  this.pos = [this.pos[0] + offsetX, this.pos[1] + offsetY];\n  }\n}\n\nexport default Bullet;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/bullet.js","import Bullet from './bullet';\n\nclass Cannon {\n  constructor(options) {\n    this.pos = [320, 400];\n    this.game = options.game;\n  }\n\n  draw(ctx) {\n    const img = document.getElementById('char');\n    ctx.drawImage(img, this.pos[0], this.pos[1]);\n  }\n\n  fireBullet() {\n    const bullet = new Bullet({\n      pos: [this.pos[0] + 35, this.pos[1]],\n      vel: [0, 1],\n      game: this.game\n    });\n\n    this.game.addBullet(bullet);\n  }\n\n  move(direction) {\n    this.pos[0] += direction\n    if (this.pos[0] > canvas.width) {\n      this.pos[0] = 0;\n    } else if (this.pos[0] < 0 ) {\n      this.pos[0] = canvas.width;\n    }\n  }\n\n\n}\n\nexport default Cannon;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/cannon.js"],"sourceRoot":""}